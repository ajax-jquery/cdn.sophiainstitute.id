---
layout: null
permalink: /absensi/
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Absensi Kajian</title>
  <style>.modal input,body,tbody td,thead th{padding:10px}table{margin-bottom:20px}body,tbody tr:nth-child(2n){background-color:#f9f9f9}button,p,h1,tbody td[class]{text-align:center}.container,.modal{padding:20px;box-shadow:0 4px 6px rgba(0,0,0,.1)}.modal label,button,table{display:block}.modal button,button{width:100%;padding:10px;color:#fff;cursor:pointer}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;line-height:1.6}.container{max-width:1000px;margin:0 auto;background:#fff;border-radius:8px}table{table-layout:fixed;width:100%}td,th{word-wrap:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}thead th{background-color:#f0f0f0;color:#333}.hadir,td input[type=radio][value=Hadir]{background-color:#d4edda}.izin,td input[type=radio][value=Izin]{background-color:#fff3cd}.alpa,td input[type=radio][value=Alpa]{background-color:#f8d7da}tbody tr:nth-child(odd){background-color:#fff}button{background-color:#007bff;border:none;border-radius:5px}button:hover{background-color:#0056b3}tbody td,thead th{text-align:left}@media (max-width:768px){td,th{white-space:normal;word-wrap:break-word}h1{font-size:1.5rem}button,table{font-size:.9rem}button{padding:8px}}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:10;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:.3s ease-in-out}.modal-overlay.show{opacity:1;visibility:visible}.modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;width:90%;max-width:400px;border-radius:10px;z-index:20}.modal.hidden{display:none}.modal h2{margin-bottom:15px;font-size:1.5rem}.modal label{margin-bottom:5px;font-weight:700}.modal input{width:100%;margin-bottom:10px;border:1px solid #ccc;border-radius:5px}.modal button{margin-top:10px;background-color:#28a745;border:none;border-radius:5px}.modal button:hover{background-color:#218838}/* Pastikan <td> memiliki posisi relatif untuk pembatasan label */
td {
    position: relative;
    padding: 0; /* Menghilangkan padding default */
}

/* Style untuk label */
td label {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-sizing: border-box;
}

/* Membuat radio-button menggunakan pseudo-element */
td label::before {
    content: '';
    display: inline-block;
    width: 16px; /* Ukuran lingkaran */
    height: 16px;
    border: 2px solid #333; /* Warna border lingkaran */
    border-radius: 50%; /* Membuat lingkaran */
    margin-right: 8px; /* Jarak lingkaran ke teks */
    background-color: transparent; /* Default kosong */
    transition: background-color 0.3s ease;
}

/* Ketika radio dipilih */
td input[type="radio"]:checked + label::before {
    background-color: #333; /* Warna isi lingkaran */
    border-color: #333; /* Konsisten dengan border */
}

/* Warna latar belakang berdasarkan kelas */
.hadir label {
    background-color: #d4edda;
}

.izin label {
    background-color: #fff3cd;
}

.alpa label {
    background-color: #f8d7da;
}

/* Sembunyikan input radio asli */
td input[type="radio"] {
    display: none;
}
td{width:100%;}
  
</style>
</head>
<body>
  <div class="container">
    <h1>Form Absensi Kajian</h1>
    <p>Pertemuan: <span id="tanggal">Rabu, 13 November 2024</span></p>
    <form id="attendanceForm">
      <table>
        <thead>
          <tr>
            <th>Nama</th>
            <th class="hadir">Hadir</th>
            <th class="izin">Izin</th>
            <th class="alpa">Alpa</th>
          </tr>
        </thead>
        <tbody id="anggotasi"></tbody>
      </table>
      <button type="button" id="submitAttendance">Submit</button>
    </form>
  </div>

  <!-- Modal untuk autentikasi -->
  <div class="modal-overlay hidden"></div>
  <div class="modal hidden" id="authModal">
    <h2>Data Pengabsen</h2>
    <label for="username">Username:</label>
    <input type="text" id="username" required>
    <label for="password">Password:</label>
    <input type="password" id="password" required>
    <button id="authSubmit">Submit</button>
    <button onclick="closeAuthModal()">Batal</button>
  </div>
  <script>
  
  const getNamaHari=a=>{let e=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];return e[a]},getNamaBulan=a=>{let e=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];return e[a]},sekarang=new Date,hari=sekarang.getDay(),tanggal=sekarang.getDate(),bulan=sekarang.getMonth(),tahun=sekarang.getFullYear();
  
  
  
let tanggalSekarang=`<strong>${getNamaHari(hari)}, ${tanggal} ${getNamaBulan(bulan)} ${tahun}</strong>`;

if (getNamaHari(hari) != "Minggu" && getNamaHari(hari) != "Selasa") {
   tanggalSekarang+=` (<i style="color:red">Tidak ada absensi</i>)`
}

document.getElementById("tanggal").innerHTML=tanggalSekarang;
  
        const jsonData = {
            "Nama": [
"Rama Safawi",
"Fitrayanti S. Maila",
"Isnurananda",
"Febrianto",
"Abd gafur",
"TATANG MUHAMMAD NOOR",
"Maswar",
"Alif fikri",
"Alyah Bongga",
"Anifa Hakim",
"Rio Ardiansya",
"Yuliana Anggraeni A",
"Athaya Alifianti",
"Muh. Fadli",
"Dimas Septiadi Pratama",
"Nafsal",
"Nasrudin",
"AHKSAN",
"Moh Valen Saputra makaranu"
            ]
        };

        // Mengurutkan nama berdasarkan abjad
        const sortedNames = jsonData.Nama.sort((a, b) => a.localeCompare(b));

        // Fungsi untuk mengubah nama menjadi format kapital di awal setiap kata
        const formatName = (name) => {
            return name.split(' ')
                .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
                .join(' ');
        };

        // Menampilkan data di dalam tabel dengan ID "Anggota"
        const tbody = document.getElementById("anggotasi");

        // Membuat HTML menggunakan template literal
        sortedNames.forEach(name => {
            const formattedName = formatName(name);
            const nama = formattedName.replaceAll(" ","_");

            const tr = `
              <tr>
    <td>${formattedName}</td>
    <td class="hadir">
        <input type="radio" id="${nama}-hadir" name="${nama}" value="Hadir" required>
        <label for="${nama}-hadir"></label>
    </td>
    <td class="izin">
        <input type="radio" id="${nama}-izin" name="${nama}" value="Izin">
        <label for="${nama}-izin"></label>
    </td>
    <td class="alpa">
        <input type="radio" id="${nama}-alpa" name="${nama}" value="Alpa">
        <label for="${nama}-alpa"></label>
    </td>
</tr>
            `;
            tbody.innerHTML += tr;
        });
    </script>
 <script>// Tombol untuk submit absensi
document.getElementById('submitAttendance').addEventListener('click', () => {
    const form = document.getElementById('attendanceForm');
    const formData = new FormData(form);
    const attendance = {};

    // Ambil data dari form dan simpan ke dalam objek
    for (let [key, value] of formData.entries()) {
        attendance[key] = value;
    }

    // Validasi: Semua form harus diisi
    if (Object.keys(attendance).length !== form.querySelectorAll('tbody tr').length) {
        alert('Semua form wajib diisi!');
        return;
    }

    // Tampilkan modal autentikasi
    const authModal = document.getElementById('authModal');
    const modalOverlay = document.querySelector('.modal-overlay');

    if (authModal && modalOverlay) {
        authModal.classList.remove('hidden'); // Tampilkan modal
        modalOverlay.classList.add('show');  // Tampilkan overlay
    } else {
        console.error('Modal or overlay element not found!');
    }
});

// Tombol submit pada modal autentikasi
document.getElementById('authSubmit').addEventListener('click', async () => {
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    // Validasi username dan password
    if (!username || !password) {
        alert('Username dan Password wajib diisi!');
        return;
    }

    // Ambil data absensi dari form
    const attendanceData = Object.fromEntries(new FormData(document.getElementById('attendanceForm')).entries());

    // Kirim data ke server menggunakan Fetch API
    try {
        const response = await fetch('https://absensi-anggota.glitch.me/submit-absensi', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ username, password, attendanceData }),
        });

        const result = await response.json();
        alert(result.message); 
        if (response.ok) {
            closeAuthModal();
        }
    } catch (error) {
        console.error('Error submitting attendance:', error);
        alert('Terjadi kesalahan saat mengirim data!');
    }
});

// Fungsi untuk menutup modal
function closeAuthModal() {
    const authModal = document.getElementById('authModal');
    const modalOverlay = document.querySelector('.modal-overlay');

    if (authModal && modalOverlay) {
        authModal.classList.add('hidden'); // Sembunyikan modal
        modalOverlay.classList.remove('show'); // Sembunyikan overlay
    }
}

// Tambahkan logika untuk menutup modal jika diperlukan (opsional)
document.querySelector('.modal-overlay').addEventListener('click', closeAuthModal);
</script>

</body>
</html>
